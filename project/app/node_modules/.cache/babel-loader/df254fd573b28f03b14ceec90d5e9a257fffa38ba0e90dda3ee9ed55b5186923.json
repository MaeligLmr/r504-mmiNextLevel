{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { addFormation, deleteFormation, loadFormations, updateFormation } from './adminAsyncAction';\nconst adminSlice = createSlice({\n  name: 'admin',\n  initialState: {\n    univ: [],\n    isAdmin: true,\n    editing: false,\n    idUnivEdited: null\n  },\n  reducers: {\n    startEdit(state, action) {\n      state.editing = true;\n      state.idUnivEdited = action.payload;\n    },\n    stopEdit(state) {\n      state.editing = false;\n      state.idUnivEdited = null;\n    }\n  },\n  errors: {\n    apiErrorLoad: null\n  },\n  extraReducers: builder => {\n    builder.addCase(loadFormations.pending, (state, action) => {\n      state.loading = true;\n    }).addCase(loadFormations.fulfilled, (state, action) => {\n      state.univ = action.payload;\n      state.loading = false;\n    }).addCase(loadFormations.rejected, (state, action) => {\n      console.log(action.error.message);\n      state.loading = false;\n    })\n    //    .addCase(addFormation.fulfilled, (state, action)=>{\n    //     state.univ.push(action.payload);\n    //     state.editing = false;\n    // })\n    // .addCase(addFormation.rejected, (state, action)=>{\n    //     console.log(\"Erreur lors de l'ajout de formation :\" + action.error.message)\n    // })\n    .addCase(updateFormation.fulfilled, (state, action) => {\n      state.univ[state.univ.findIndex(element => element._id === state.idUnivEdited)] = action.payload;\n      state.editing = false;\n      state.idUnivEdited = null;\n    }).addCase(updateFormation.rejected, (state, action) => {\n      console.log(action.error.message);\n    });\n    // .addCase(deleteFormation.fulfilled, (state, action) => {\n    //     state.univ = state.univ.filter((formation) => formation._id !== action.payload._id);\n    //     state.loading = false; \n    //   })\n    //   // Cas rejected pour deleteFormationAsync\n    //   .addCase(deleteFormation.rejected, (state, action) => {\n    //     console.log('Erreur lors de la suppression du formation :', action.payload);\n    //     state.loading = false; \n\n    //   });\n  }\n});\nexport const {\n  startEdit,\n  stopEdit\n} = adminSlice.actions;\nexport default adminSlice.reducer;","map":{"version":3,"names":["createSlice","addFormation","deleteFormation","loadFormations","updateFormation","adminSlice","name","initialState","univ","isAdmin","editing","idUnivEdited","reducers","startEdit","state","action","payload","stopEdit","errors","apiErrorLoad","extraReducers","builder","addCase","pending","loading","fulfilled","rejected","console","log","error","message","findIndex","element","_id","actions","reducer"],"sources":["C:/iut_local/res504/src/features/admin/adminSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport { addFormation, deleteFormation, loadFormations, updateFormation } from './adminAsyncAction';\r\n\r\nconst adminSlice = createSlice({\r\n    name: 'admin',\r\n    initialState: {\r\n        univ:[],\r\n        isAdmin: true,\r\n        editing: false,\r\n        idUnivEdited: null\r\n    },\r\n    reducers: {\r\n        startEdit(state, action){\r\n            state.editing = true;\r\n            state.idUnivEdited = action.payload;\r\n       },\r\n       stopEdit(state){\r\n            state.editing = false;\r\n            state.idUnivEdited = null;\r\n       }\r\n    },\r\n    errors: {\r\n        apiErrorLoad: null,\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder.addCase(loadFormations.pending, (state, action)=> {\r\n            state.loading = true;\r\n       })\r\n       .addCase(loadFormations.fulfilled, (state, action)=> {\r\n            state.univ = action.payload;\r\n            state.loading = false;\r\n       })\r\n       .addCase(loadFormations.rejected, (state, action)=> {\r\n            console.log(action.error.message);\r\n            state.loading = false;\r\n       })\r\n    //    .addCase(addFormation.fulfilled, (state, action)=>{\r\n    //     state.univ.push(action.payload);\r\n    //     state.editing = false;\r\n    // })\r\n    // .addCase(addFormation.rejected, (state, action)=>{\r\n    //     console.log(\"Erreur lors de l'ajout de formation :\" + action.error.message)\r\n    // })\r\n    .addCase(updateFormation.fulfilled, (state, action) => {\r\n        state.univ[state.univ.findIndex((element) => element._id === state.idUnivEdited)] = action.payload;\r\n        state.editing = false;\r\n        state.idUnivEdited = null;\r\n    })\r\n    .addCase(updateFormation.rejected, (state, action) => {\r\n        console.log(action.error.message);\r\n    })\r\n    // .addCase(deleteFormation.fulfilled, (state, action) => {\r\n    //     state.univ = state.univ.filter((formation) => formation._id !== action.payload._id);\r\n    //     state.loading = false; \r\n    //   })\r\n    //   // Cas rejected pour deleteFormationAsync\r\n    //   .addCase(deleteFormation.rejected, (state, action) => {\r\n    //     console.log('Erreur lors de la suppression du formation :', action.payload);\r\n    //     state.loading = false; \r\n        \r\n    //   });\r\n    }\r\n})\r\n\r\nexport const { startEdit, stopEdit } = adminSlice.actions;\r\nexport default adminSlice.reducer;"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,YAAY,EAAEC,eAAe,EAAEC,cAAc,EAAEC,eAAe,QAAQ,oBAAoB;AAEnG,MAAMC,UAAU,GAAGL,WAAW,CAAC;EAC3BM,IAAI,EAAE,OAAO;EACbC,YAAY,EAAE;IACVC,IAAI,EAAC,EAAE;IACPC,OAAO,EAAE,IAAI;IACbC,OAAO,EAAE,KAAK;IACdC,YAAY,EAAE;EAClB,CAAC;EACDC,QAAQ,EAAE;IACNC,SAASA,CAACC,KAAK,EAAEC,MAAM,EAAC;MACpBD,KAAK,CAACJ,OAAO,GAAG,IAAI;MACpBI,KAAK,CAACH,YAAY,GAAGI,MAAM,CAACC,OAAO;IACxC,CAAC;IACDC,QAAQA,CAACH,KAAK,EAAC;MACVA,KAAK,CAACJ,OAAO,GAAG,KAAK;MACrBI,KAAK,CAACH,YAAY,GAAG,IAAI;IAC9B;EACH,CAAC;EACDO,MAAM,EAAE;IACJC,YAAY,EAAE;EAClB,CAAC;EACDC,aAAa,EAAGC,OAAO,IAAK;IACxBA,OAAO,CAACC,OAAO,CAACnB,cAAc,CAACoB,OAAO,EAAE,CAACT,KAAK,EAAEC,MAAM,KAAI;MACtDD,KAAK,CAACU,OAAO,GAAG,IAAI;IACzB,CAAC,CAAC,CACDF,OAAO,CAACnB,cAAc,CAACsB,SAAS,EAAE,CAACX,KAAK,EAAEC,MAAM,KAAI;MAChDD,KAAK,CAACN,IAAI,GAAGO,MAAM,CAACC,OAAO;MAC3BF,KAAK,CAACU,OAAO,GAAG,KAAK;IAC1B,CAAC,CAAC,CACDF,OAAO,CAACnB,cAAc,CAACuB,QAAQ,EAAE,CAACZ,KAAK,EAAEC,MAAM,KAAI;MAC/CY,OAAO,CAACC,GAAG,CAACb,MAAM,CAACc,KAAK,CAACC,OAAO,CAAC;MACjChB,KAAK,CAACU,OAAO,GAAG,KAAK;IAC1B,CAAC;IACJ;IACA;IACA;IACA;IACA;IACA;IACA;IAAA,CACCF,OAAO,CAAClB,eAAe,CAACqB,SAAS,EAAE,CAACX,KAAK,EAAEC,MAAM,KAAK;MACnDD,KAAK,CAACN,IAAI,CAACM,KAAK,CAACN,IAAI,CAACuB,SAAS,CAAEC,OAAO,IAAKA,OAAO,CAACC,GAAG,KAAKnB,KAAK,CAACH,YAAY,CAAC,CAAC,GAAGI,MAAM,CAACC,OAAO;MAClGF,KAAK,CAACJ,OAAO,GAAG,KAAK;MACrBI,KAAK,CAACH,YAAY,GAAG,IAAI;IAC7B,CAAC,CAAC,CACDW,OAAO,CAAClB,eAAe,CAACsB,QAAQ,EAAE,CAACZ,KAAK,EAAEC,MAAM,KAAK;MAClDY,OAAO,CAACC,GAAG,CAACb,MAAM,CAACc,KAAK,CAACC,OAAO,CAAC;IACrC,CAAC,CAAC;IACF;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;EACA;AACJ,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEjB,SAAS;EAAEI;AAAS,CAAC,GAAGZ,UAAU,CAAC6B,OAAO;AACzD,eAAe7B,UAAU,CAAC8B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}